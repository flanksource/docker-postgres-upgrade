{
  "additionalProperties": false,
  "description": "WAL-G backup and archiving configuration",
  "properties": {
    "az_account_key": {
      "description": "Azure storage account key",
      "type": "string",
      "x-sensitive": true
    },
    "az_account_name": {
      "description": "Azure storage account name",
      "type": "string"
    },
    "az_prefix": {
      "description": "Azure Storage prefix",
      "type": "string"
    },
    "backup_retain_count": {
      "default": 7,
      "description": "Number of backups to retain",
      "minimum": 1,
      "type": "integer"
    },
    "backup_schedule": {
      "default": "0 2 * * *",
      "description": "Backup schedule in cron format",
      "type": "string"
    },
    "compression_level": {
      "default": 1,
      "description": "Compression level (0-9)",
      "maximum": 9,
      "minimum": 0,
      "type": "integer"
    },
    "compression_method": {
      "default": "lz4",
      "description": "Compression method for backups",
      "enum": [
        "lz4",
        "lzma",
        "brotli",
        "zstd"
      ],
      "type": "string"
    },
    "delta_max_steps": {
      "default": 32,
      "description": "Maximum steps for delta backups",
      "minimum": 1,
      "type": "integer"
    },
    "enabled": {
      "default": false,
      "description": "Enable or disable WAL-G",
      "type": "boolean"
    },
    "file_prefix": {
      "description": "Local file system prefix for backups",
      "type": "string"
    },
    "gs_prefix": {
      "description": "Google Cloud Storage prefix (e.g., gs://bucket/path/to/folder)",
      "pattern": "^gs://.*",
      "type": "string"
    },
    "gs_project_id": {
      "description": "Google Cloud project ID",
      "type": "string"
    },
    "gs_service_account_key": {
      "description": "Google Cloud service account key JSON",
      "type": "string",
      "x-sensitive": true
    },
    "postgresql_data_dir": {
      "default": "/var/lib/postgresql/data",
      "description": "PostgreSQL data directory path",
      "type": "string"
    },
    "s3_access_key": {
      "description": "AWS S3 access key ID",
      "type": "string",
      "x-sensitive": true
    },
    "s3_endpoint": {
      "description": "Custom S3 endpoint URL",
      "type": "string"
    },
    "s3_prefix": {
      "description": "S3 storage prefix (e.g., s3://bucket/path/to/folder)",
      "pattern": "^s3://.*",
      "type": "string"
    },
    "s3_region": {
      "default": "us-east-1",
      "description": "AWS S3 region",
      "type": "string"
    },
    "s3_secret_key": {
      "description": "AWS S3 secret access key",
      "type": "string",
      "x-sensitive": true
    },
    "s3_session_token": {
      "description": "AWS S3 session token (for temporary credentials)",
      "type": "string",
      "x-sensitive": true
    },
    "s3_use_ssl": {
      "default": true,
      "description": "Use SSL for S3 connections",
      "type": "boolean"
    },
    "stream_create_command": {
      "description": "Command to create WAL stream",
      "type": "string"
    },
    "stream_restore_command": {
      "description": "Command to restore from WAL stream",
      "type": "string"
    },
    "upload_concurrency": {
      "default": 16,
      "description": "Number of concurrent uploads",
      "maximum": 100,
      "minimum": 1,
      "type": "integer"
    },
    "upload_disk_concurrency": {
      "default": 1,
      "description": "Number of concurrent disk operations",
      "maximum": 100,
      "minimum": 1,
      "type": "integer"
    },
    "wal_verify_checksum": {
      "default": true,
      "description": "Verify WAL checksums during backup",
      "type": "boolean"
    }
  },
  "type": "object"
}